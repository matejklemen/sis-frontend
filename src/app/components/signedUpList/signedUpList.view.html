<sis-navbar></sis-navbar>

<div class="container">
  <div>
    <h3>
      Seznam prijavljenih študentov
      <!-- TODO: make proper export button i copied this one from studentlist
      <export-buttons exp-data="vm.studentsList" exp-title="Seznam študentov za {{ vm.searched.course.id }} - {{ vm.searched.course.name }} ({{ vm.searched.studyYear.name }})", exp-col-names="['#','Vpisna številka','Ime','Priimek']", exp-col-values="['registerNumber','name','surname']"></export-buttons>
      -->
    </h3>
    <h4>Predmet: <strong>{{ vm.examTerm.courseOrganization.course.id }} - {{ vm.examTerm.courseOrganization.course.name }}</strong></h4>
    <div class="clearfix" style="margin-bottom: 12px;">
      Datum in čas izpitnega roka: <strong>{{ vm.examTerm.datetime | formatDate }}</strong>
      <br/>
      Izpraševalci: <strong>{{ vm.examTerm.organizer | formatOrganizer }}</strong>
      <br/>
      Opombe: <strong>{{ vm.examTerm.notes || 'Ni opomb' }}</strong>
      <div class="pull-right">
        <button class="btn btn-primary btn-sm" ng-show="!vm.examTerm.isValid" ng-click="vm.toggleEditMode()"><span class="glyphicon glyphicon-edit"></span> {{ vm.editMode ? 'Končaj z urejanjem' : 'Urejanje ocen' }}</button>
        <button class="btn btn-success btn-sm" ng-show="vm.editMode" ng-click="vm.postGrades()"><span class="glyphicon glyphicon-save"></span> Zapiši ocene</button>
      </div>
    </div>
  </div>

  <div>
    <table class="table table-striped table-hover">
      <thead>
        <tr class="success">
          <th>#</th>
          <th>Vpisna številka</th>
          <th>Ime</th>
          <th>Priimek</th>
          <th>Študijsko leto</th>
          <th style="font-size: 0.9em;">Številka<br>polaganja</th>
          <th style="font-size: 0.9em;">Točke pisnega<br>izpita</th>
          <th style="font-size: 0.9em;">Končna ocena<br>predmeta</th>
        </tr>
      </thead>
      <tbody>
        <tr ng-repeat="stu in vm.studentsList">
          <td>{{ $index+1 }}</td>
          <td>{{ stu.studentInfo.registerNumber }}</td>
          <td>{{ stu.studentInfo.name }}</td>
          <td>{{ stu.studentInfo.surname }}</td>
          <td>{{ stu.yearOfTakingCourse.name }}</td>
          <td>{{ stu.currentNumberOfTakings }}</td>
          <td>
            <span ng-hide="vm.editMode">{{ stu.currentGrade }}</span>
            <div ng-class="{ 'has-success' : stu.posted === true, 'has-error' : stu.posted === false }">
              <input type="number" class="form-control input-sm" style="width: 100px;" min="0" max="100" ng-show="vm.editMode" ng-model="stu.currentGrade" />
            </div>
          </td>
          <td>
            <span ng-hide="vm.editMode">{{ stu.finalGrade }}</span>
            <div ng-class="{ 'has-success' : stu.posted === true, 'has-error' : stu.posted === false }">
              <input type="number" class="form-control input-sm" style="width: 100px;" min="0" max="100" ng-show="vm.editMode" ng-model="stu.finalGrade" />
            </div>
          </td>
        </tr>
      </tbody>
    </table>
    <div ng-hide="vm.studentsList">Na ta izpitni rok ni nobenih prijav.</div>
  </div>

</div>